(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{18341:(e,t,a)=>{"use strict";a.d(t,{k:()=>h});var s=a(95155),l=a(83540),r=a(51382),o=a(96025),n=a(16238),i=a(94517),d=a(24026),c=a(83394),m=a(36079),u=a(21374);let x=e=>e>0?"".concat(e):"";function h(e){let{data:t}=e;return!t||t.every(e=>0===e.total)?(0,s.jsx)("div",{className:"flex justify-center items-center h-[350px]",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"N\xe3o h\xe1 dados de loca\xe7\xf5es para exibir."})}):(0,s.jsx)(l.u,{width:"100%",height:350,children:(0,s.jsxs)(r.X,{data:t,margin:{top:20,right:20,bottom:20,left:20},children:[(0,s.jsx)(o.W,{dataKey:"month",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,s.jsx)(n.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e),allowDecimals:!1}),(0,s.jsx)(i.m,{cursor:{fill:"rgba(128, 128, 128, 0.1)"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)",border:"1px solid #ccc",borderRadius:"5px"}}),(0,s.jsx)(d.s,{verticalAlign:"top",wrapperStyle:{top:0}}),(0,s.jsx)(c.y,{dataKey:"alugadas",name:"Nova",stackId:"a",fill:"hsl(221.2 83.2% 53.3%)",radius:[0,0,0,0],children:(0,s.jsx)(m.Z,{dataKey:"alugadas",position:"center",style:{fontSize:"12px",fill:"white",fontWeight:"bold"},formatter:x})}),(0,s.jsx)(c.y,{dataKey:"relocadas",name:"Usada",stackId:"a",fill:"hsl(142.1 76.2% 36.3%)",radius:[4,4,0,0],children:(0,s.jsx)(m.Z,{dataKey:"relocadas",position:"center",style:{fontSize:"12px",fill:"white",fontWeight:"bold"},formatter:x})}),(0,s.jsx)(u.N,{type:"monotone",dataKey:"total",name:"Total",stroke:"hsl(221.2 83.2% 53.3%)",strokeWidth:2,dot:{r:4},activeDot:{r:6},label:!1})]})})}},44536:(e,t,a)=>{Promise.resolve().then(a.bind(a,60432))},45876:(e,t,a)=>{"use strict";a.d(t,{O:()=>c});var s=a(95155),l=a(12115),r=a(35695),o=a(59576),n=a(66695),i=a(45731),d=a(50172);function c(e){let{children:t,fallback:a}=e,{user:c,loading:m}=(0,o.A)(),u=(0,r.useRouter)(),[x,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{p(!0);let e=localStorage.getItem("firebase_user");h(!!e),e&&console.log("Found stored user, showing content immediately")},[]),f)?c||x?(0,s.jsx)(s.Fragment,{children:t}):m?a||(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)(n.Zp,{className:"w-full max-w-md",children:(0,s.jsxs)(n.Wu,{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-full bg-primary/10",children:(0,s.jsx)(i.A,{className:"h-8 w-8 text-primary"})}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Verificando autentica\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aguarde enquanto verificamos suas credenciais..."})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{className:"text-sm",children:"Carregando..."})]})]})})}):((0,l.useEffect)(()=>{if(f&&!c&&!x&&!m){let e=window.location.pathname+window.location.search;"/login"!==e&&"/signup"!==e&&(localStorage.setItem("redirect_after_login",e),console.log("No authentication found, redirecting to login..."),u.replace("/login"))}},[f,c,x,m,u]),null):a||(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)(n.Zp,{className:"w-full max-w-md",children:(0,s.jsxs)(n.Wu,{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-full bg-primary/10",children:(0,s.jsx)(i.A,{className:"h-8 w-8 text-primary"})}),(0,s.jsx)("div",{className:"text-center space-y-2",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Carregando aplica\xe7\xe3o..."})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{className:"text-sm",children:"Aguarde..."})]})]})})})}},59409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>p,gC:()=>f,l6:()=>c,yv:()=>m});var s=a(95155),l=a(12115),r=a(93081),o=a(79556),n=a(77381),i=a(10518),d=a(59434);let c=r.bL;r.YJ;let m=r.WT,u=l.forwardRef((e,t)=>{let{className:a,children:l,...n}=e;return(0,s.jsxs)(r.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[l,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(o.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.l9.displayName;let x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=r.PP.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})});h.displayName=r.wn.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,position:o="popper",...n}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:o,...n,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(h,{})]})})});f.displayName=r.UC.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=r.JU.displayName;let p=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,s.jsxs)(r.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),(0,s.jsx)(r.p4,{children:l})]})});p.displayName=r.q7.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.wv.displayName},60432:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eu});var s=a(95155),l=a(12115),r=a(23169),o=a(45876),n=a(22346),i=a(66695),d=a(59409),c=a(5263),m=a(98328),u=a(78071),x=a(8376),h=a(19968),f=a(3235),p=a(9041),j=a(80659),g=a(83662),v=a(83343),N=a(44861),b=a(20908),y=a(5637),w=a(78816),_=a(80644),k=a(73168),S=a(76959),A=a(99591),C=a(83540),D=a(8782),L=a(94517),R=a(24026),M=a(34e3),W=a(54811),Z=a(81499);let E=e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0].payload;return(0,s.jsxs)("div",{className:"rounded-lg border bg-background p-2.5 shadow-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"".concat(e.name)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Percentual: ".concat(e.value.toFixed(1),"%")}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Contagem: ".concat(e.count)})]})}return null},K=Math.PI/180,z=e=>{let{cx:t,cy:a,midAngle:l,innerRadius:r,outerRadius:o,percent:n,name:i}=e,d=r+(o-r)*.6,c=t+d*Math.cos(-l*K),m=a+d*Math.sin(-l*K);return 100*n<3?null:(0,s.jsx)("text",{x:c,y:m,fill:"hsl(var(--primary-foreground))",textAnchor:c>t?"start":"end",dominantBaseline:"central",fontSize:"10px",fontWeight:"medium",children:"".concat((100*n).toFixed(0),"%")})};function F(e){let{data:t}=e;if(!t||0===t.length)return(0,s.jsx)("div",{className:"h-[350px] w-full flex items-center justify-center text-muted-foreground",children:"N\xe3o h\xe1 dados de status para exibir ou est\xe3o carregando..."});let a=t.reduce((e,t)=>(e[t.name.replace(/\s+/g,"_")]={label:t.name,color:t.fill},e),{}),l=t.map(e=>({value:e.name,color:e.fill,type:"square"}));return(0,s.jsx)("div",{className:"h-[350px] w-full",children:(0,s.jsx)(Z.at,{config:a,className:"h-full w-full",children:(0,s.jsx)(C.u,{width:"100%",height:"100%",children:(0,s.jsxs)(D.r,{margin:{top:0,right:0,bottom:0,left:0},children:[(0,s.jsx)(L.m,{content:(0,s.jsx)(E,{}),cursor:{fill:"hsl(var(--accent) / 0.1)"}}),(0,s.jsx)(R.s,{content:(0,s.jsx)(Z.Hm,{payload:l}),verticalAlign:"bottom",align:"center",wrapperStyle:{paddingTop:"20px"}}),(0,s.jsx)(M.F,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:z,outerRadius:100,innerRadius:40,dataKey:"value",nameKey:"name",stroke:"hsl(var(--background))",strokeWidth:2,children:t.map((e,t)=>(0,s.jsx)(W.f,{fill:e.fill},"cell-".concat(t)))})]})})})})}var I=a(99445),O=a(94754),T=a(96025),B=a(16238),H=a(62341),P=a(36079);let J={cumulativeCount:{label:"Total de Motos na Base",color:"hsl(var(--chart-1))"}};function q(e){let{data:t}=e;return t&&0!==t.length?(0,s.jsx)("div",{className:"h-[300px] w-full",children:(0,s.jsx)(Z.at,{config:J,className:"h-full w-full",children:(0,s.jsx)(C.u,{width:"100%",height:"100%",children:(0,s.jsxs)(I.Q,{data:t,margin:{top:20,right:10,left:-15,bottom:5},children:[(0,s.jsx)(O.d,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),(0,s.jsx)(T.W,{dataKey:"month",tickLine:!1,axisLine:!1,stroke:"hsl(var(--muted-foreground))",fontSize:10}),(0,s.jsx)(B.h,{tickLine:!1,axisLine:!1,stroke:"hsl(var(--muted-foreground))",fontSize:10,domain:[0,e=>Math.max(Math.ceil(1.1*e)+1,10)],allowDecimals:!1}),(0,s.jsx)(L.m,{cursor:{fill:"hsl(var(--accent) / 0.1)"},content:(0,s.jsx)(Z.Nt,{indicator:"dot"})}),(0,s.jsx)(H.G,{dataKey:"cumulativeCount",type:"monotone",fill:"var(--color-cumulativeCount)",fillOpacity:.3,stroke:"var(--color-cumulativeCount)",stackId:"a",children:(0,s.jsx)(P.Z,{dataKey:"cumulativeCount",position:"top",style:{fontSize:"10px",fill:"hsl(var(--foreground))"},formatter:e=>e>0?e:null})})]})})})}):(0,s.jsx)("div",{className:"h-[300px] w-full flex items-center justify-center text-muted-foreground",children:"Carregando dados do gr\xe1fico de crescimento..."})}var U=a(18341),V=a(51382),G=a(83394),Q=a(21374);let X=e=>e>0?"".concat(e):"";function Y(e){let{data:t}=e;return!t||t.every(e=>0===e.total)?(0,s.jsx)("div",{className:"flex justify-center items-center h-[350px]",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"N\xe3o h\xe1 dados de loca\xe7\xf5es para exibir."})}):(0,s.jsx)(C.u,{width:"100%",height:350,children:(0,s.jsxs)(V.X,{data:t,margin:{top:20,right:20,bottom:20,left:20},children:[(0,s.jsx)(T.W,{dataKey:"day",stroke:"#888888",fontSize:10,tickLine:!1,axisLine:!1,interval:Math.floor(t.length/8)}),(0,s.jsx)(B.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e),allowDecimals:!1}),(0,s.jsx)(L.m,{cursor:{fill:"rgba(128, 128, 128, 0.1)"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.8)",border:"1px solid #ccc",borderRadius:"5px"},labelFormatter:e=>"Dia ".concat(e)}),(0,s.jsx)(R.s,{verticalAlign:"top",wrapperStyle:{top:0}}),(0,s.jsx)(G.y,{dataKey:"alugadas",name:"Nova",stackId:"a",fill:"hsl(221.2 83.2% 53.3%)",radius:[0,0,0,0],children:(0,s.jsx)(P.Z,{dataKey:"alugadas",position:"center",style:{fontSize:"10px",fill:"white",fontWeight:"bold"},formatter:X})}),(0,s.jsx)(G.y,{dataKey:"relocadas",name:"Usada",stackId:"a",fill:"hsl(142.1 76.2% 36.3%)",radius:[4,4,0,0],children:(0,s.jsx)(P.Z,{dataKey:"relocadas",position:"center",style:{fontSize:"10px",fill:"white",fontWeight:"bold"},formatter:X})}),(0,s.jsx)(Q.N,{type:"monotone",dataKey:"total",name:"Total",stroke:"hsl(221.2 83.2% 53.3%)",strokeWidth:2,dot:{r:3},activeDot:{r:5},label:!1})]})})}var $=a(3401);function ee(e){let{data:t}=e;return(0,s.jsx)(C.u,{width:"100%",height:350,children:(0,s.jsxs)($.E,{data:t,margin:{top:30,right:30,left:20,bottom:5},children:[(0,s.jsx)(O.d,{strokeDasharray:"3 3"}),(0,s.jsx)(T.W,{dataKey:"state",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,s.jsx)(B.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e)}),(0,s.jsx)(L.m,{cursor:{fill:"rgba(128, 128, 128, 0.1)"},contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:(e,a)=>{var s;return["".concat(e," motos (").concat(null==(s=t.find(t=>t.count===e))?void 0:s.percentage.toFixed(1),"%)"),"Quantidade"]}}),(0,s.jsx)(G.y,{dataKey:"count",name:"Motos por UF",fill:"hsl(221.2 83.2% 53.3%)",radius:[4,4,0,0],children:(0,s.jsx)(P.Z,{dataKey:"count",position:"top",style:{fontSize:"12px",fill:"hsl(221.2 83.2% 53.3%)",fontWeight:"bold"},formatter:e=>e>0?e.toString():""})})]})})}var et=a(59434);let ea=new Date().getFullYear(),es=new Date().getMonth(),el=["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Juli","Agosto","Setembro","Outubro","Novembro","Dezembro"],er={active:"hsl(var(--chart-5))",locadas:"hsl(var(--chart-2))",inadimplente:"hsl(var(--destructive))",manutencao:"hsl(var(--chart-4))",recolhida:"hsl(var(--chart-1))",indisponivel_rastreador:"hsl(25 95% 53%)",indisponivel_emplacamento:"hsl(271 81% 56%)","N/Definido":"hsl(var(--muted-foreground))"},eo=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],en=(e,t)=>{let a={};e.forEach(e=>{if(!e.placa)return;let t=a[e.placa];(!t||e.data_ultima_mov&&t.data_ultima_mov&&new Date(e.data_ultima_mov)>new Date(t.data_ultima_mov)||e.data_ultima_mov&&!t.data_ultima_mov)&&(a[e.placa]=e)});let s=Object.values(a),l=s.length,r=s.filter(e=>"alugada"===e.status).length,o={};s.forEach(e=>{let t=e.status||"N/Definido";"alugada"===t?o.locadas=(o.locadas||0)+1:o[t]=(o[t]||0)+1});let n=e=>"locadas"===e?"Locadas":(0,et.k)(e),i=Object.entries(o).filter(e=>{let[,t]=e;return t>0}).map(e=>{let[t,a]=e;return{name:n(t),value:l>0?parseFloat((a/l*100).toFixed(1)):0,count:a,fill:er[t]||"hsl(var(--muted-foreground))"}}),d=Array(12).fill(0);e.forEach(e=>{if(e.data_ultima_mov)try{let a=(0,v.H)(e.data_ultima_mov);if((0,N.f)(a)&&(0,b.C)(a)===t){let t=(0,y.t)(a);"alugada"===e.status&&d[t]++}}catch(t){console.error("Error parsing date for motorcycle charts: ",e.data_ultima_mov,t)}});let c=eo.map((e,t)=>({month:e,alugadas:d[t],total:d[t]})),m=new Map;e.forEach(e=>{if(e.placa){let t=e.data_criacao||e.data_ultima_mov;if(t)try{let a=(0,v.H)(t);if((0,N.f)(a)){let t=m.get(e.placa);(!t||a<t)&&m.set(e.placa,a)}}catch(e){}}});let u=Array(12).fill(0),x=0;m.forEach(e=>{let a=(0,b.C)(e);if(a<t)x++;else if(a===t){let t=(0,y.t)(e);u[t]++}});let h=x,f=eo.map((e,t)=>({month:e,cumulativeCount:h+=u[t]}));return{kpi:{total:l.toString(),locacoes:r.toString()},statusDistribution:i,combinedRental:c,baseGrowth:f}},ei=e=>{let t=new Date;return Array.from({length:30},(e,a)=>{let s=(0,w.e)(t,29-a);return(0,_.o)(s)}).map(t=>{let a=(0,k.GP)(t,"dd/MM"),s=0;return e.forEach(e=>{if(e.data_ultima_mov)try{let a=(0,v.H)(e.data_ultima_mov);(0,N.f)(a)&&(0,S.r)((0,_.o)(a),t)&&"alugada"===e.status&&s++}catch(t){console.error("Error parsing date for daily motorcycle charts: ",e.data_ultima_mov,t)}}),{day:a,alugadas:s,total:s}})},ed=e=>{let t=new Date,a=(0,_.o)(t),s=0;e.forEach(e=>{if(e.data_ultima_mov)try{let t=(0,v.H)(e.data_ultima_mov);(0,N.f)(t)&&(0,S.r)((0,_.o)(t),a)&&"alugada"===e.status&&s++}catch(t){console.error("Error parsing date for today data: ",e.data_ultima_mov,t)}});let l={};e.forEach(e=>{if(!e.placa)return;let t=l[e.placa];(!t||e.data_ultima_mov&&t.data_ultima_mov&&new Date(e.data_ultima_mov)>new Date(t.data_ultima_mov)||e.data_ultima_mov&&!t.data_ultima_mov)&&(l[e.placa]=e)});let r=Object.values(l).filter(e=>"manutencao"===e.status).length;return{motosAlugadasHoje:s,motosRecuperadasHoje:0,motosRelocadasHoje:0,motosEmManutencao:r}},ec=(e,t,a)=>{let s=0,l=0,r=0;return e.forEach(e=>{if(e.data_ultima_mov)try{let o=(0,v.H)(e.data_ultima_mov);if((0,N.f)(o)){let n=(0,b.C)(o),i=(0,y.t)(o);if(n===a&&i===t)switch(e.status){case"active":s++;break;case"alugada":l++;break;case"manutencao":r++}}}catch(t){console.error("Error parsing date for month data: ",e.data_ultima_mov,t)}}),{motosDisponiveis:s,motosAlugadas:l,emManutencao:r,motosRelocadas:0}},em=e=>{let t={};e.forEach(e=>{if(!e.placa)return;let a=t[e.placa];(!a||e.data_ultima_mov&&a.data_ultima_mov&&new Date(e.data_ultima_mov)>new Date(a.data_ultima_mov)||e.data_ultima_mov&&!a.data_ultima_mov)&&(t[e.placa]=e)});let a=Object.values(t),s=a.length,l={};return a.forEach(e=>{let t=e.franqueado||"N/D";l[t]=(l[t]||0)+1}),Object.entries(l).map(e=>{let[t,a]=e;return{state:t.length>10?t.substring(0,10)+"...":t,count:a,percentage:s>0?a/s*100:0}}).sort((e,t)=>t.count-e.count).slice(0,10)};function eu(){let[e,t]=(0,l.useState)(""),[a,v]=(0,l.useState)([]),[N,b]=(0,l.useState)(!0),[y,w]=(0,l.useState)(null),[_,k]=(0,l.useState)(null),[S,C]=(0,l.useState)(es),[D,L]=(0,l.useState)(ea),[R,M]=(0,l.useState)(null),[W,Z]=(0,l.useState)(null),[E,K]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let e=()=>{t(new Date().toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}))};e();let a=setInterval(e,1e3);return()=>clearInterval(a)},[]),(0,l.useEffect)(()=>{b(!0);let e=(0,A.Ef)(e=>{let t=Array.isArray(e)?e:[];v(t),w(en(t,ea)),k(ei(t)),M(ed(t)),Z(ec(t,S,D)),K(em(t)),b(!1)});return()=>{e()}},[S,D]),!N&&y&&R&&W)?(0,s.jsx)(o.O,{children:(0,s.jsxs)(r.DashboardLayout,{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,s.jsx)(c.A,{className:"h-8 w-8 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground font-headline",children:"Dashboard Controle de Frota"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Vis\xe3o geral da frota de motos"})]})]}),e&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center",children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-1.5"}),"Atualizado em ",e]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mt-6",children:[(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-blue-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"Motos Alugadas"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:R.motosAlugadasHoje}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"unidades"})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-blue-500",children:(0,s.jsx)(u.A,{className:"h-6 w-6 text-white"})})]})}),(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-green-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"Motos Dispon\xedveis"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-500",children:R.motosRecuperadasHoje}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"unidades"})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-green-500",children:(0,s.jsx)(x.A,{className:"h-6 w-6 text-white"})})]})}),(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-yellow-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"N\xe3o Transferidas"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:R.motosRelocadasHoje}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"unidades"})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-yellow-500",children:(0,s.jsx)(h.A,{className:"h-6 w-6 text-white"})})]})}),(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-red-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"N\xe3o Localizadas"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-500",children:R.motosEmManutencao}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"unidades"})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-red-500",children:(0,s.jsx)(f.A,{className:"h-6 w-6 text-white"})})]})})]}),(0,s.jsx)("div",{className:"mt-8 mb-6",children:(0,s.jsx)(i.Zp,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Filtrar Status da Frota por Per\xedodo:"}),(0,s.jsxs)(d.l6,{value:S.toString(),onValueChange:e=>C(parseInt(e)),children:[(0,s.jsx)(d.bq,{className:"w-[140px]",children:(0,s.jsx)(d.yv,{})}),(0,s.jsx)(d.gC,{children:el.map((e,t)=>(0,s.jsx)(d.eb,{value:t.toString(),children:e},t))})]}),(0,s.jsxs)(d.l6,{value:D.toString(),onValueChange:e=>L(parseInt(e)),children:[(0,s.jsx)(d.bq,{className:"w-[100px]",children:(0,s.jsx)(d.yv,{})}),(0,s.jsx)(d.gC,{children:[2023,2024,2025,2026].map(e=>(0,s.jsx)(d.eb,{value:e.toString(),children:e},e))})]})]})})}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mt-6",children:[(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-blue-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"Motos Alugadas"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:W.motosAlugadas}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["em ",el[S],"/",D]})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-blue-500",children:(0,s.jsx)(u.A,{className:"h-6 w-6 text-white"})})]})}),(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-green-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"Motos Dispon\xedveis"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-500",children:W.motosDisponiveis}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["em ",el[S],"/",D]})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-green-500",children:(0,s.jsx)(x.A,{className:"h-6 w-6 text-white"})})]})}),(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-yellow-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"N\xe3o Transferidas"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:W.motosRelocadas}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["em ",el[S],"/",D]})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-yellow-500",children:(0,s.jsx)(h.A,{className:"h-6 w-6 text-white"})})]})}),(0,s.jsx)(i.Zp,{className:"border-l-4 border-l-red-500 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(i.Wu,{className:"p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"N\xe3o Localizadas"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-500",children:W.emManutencao}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["em ",el[S],"/",D]})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-red-500",children:(0,s.jsx)(f.A,{className:"h-6 w-6 text-white"})})]})})]}),(0,s.jsx)(n.w,{className:"my-8"}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2 mt-8",children:[(0,s.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"h-6 w-6 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{className:"font-headline",children:"Distribui\xe7\xe3o de Motos por Status (%)"}),(0,s.jsxs)(i.BT,{children:["Percentual de motocicletas \xfanicas em cada status (",ea,")."]})]})]})}),(0,s.jsx)(i.Wu,{className:"p-4 pt-0",children:(0,s.jsx)(F,{data:y.statusDistribution})})]}),(0,s.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-6 w-6 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.ZB,{className:"font-headline",children:["Crescimento da Base de Motos (",ea,")"]}),(0,s.jsx)(i.BT,{children:"Contagem cumulativa de placas \xfanicas por m\xeas."})]})]})}),(0,s.jsx)(i.Wu,{className:"p-4 pt-0",children:(0,s.jsx)(q,{data:y.baseGrowth})})]}),(0,s.jsxs)(i.Zp,{className:"shadow-lg lg:col-span-2",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"h-6 w-6 text-purple-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{className:"font-headline",children:"Distribui\xe7\xe3o da Frota por UF"}),(0,s.jsx)(i.BT,{children:"Quantidade de motocicletas por estado/regi\xe3o (Top 10)."})]})]})}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)(ee,{data:E||[]})})]}),(0,s.jsxs)(i.Zp,{className:"shadow-lg lg:col-span-2",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-6 w-6 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.ZB,{className:"font-headline",children:["An\xe1lise Mensal de Loca\xe7\xf5es (",ea,")"]}),(0,s.jsx)(i.BT,{children:"Volume de motos novas e usadas (barras) e o total de loca\xe7\xf5es (linha)."})]})]})}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)(U.k,{data:y.combinedRental})})]}),(0,s.jsxs)(i.Zp,{className:"shadow-lg lg:col-span-2",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-6 w-6 text-green-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{className:"font-headline",children:"An\xe1lise Di\xe1ria de Loca\xe7\xf5es (\xdaltimos 30 Dias)"}),(0,s.jsx)(i.BT,{children:"Volume de motos novas e usadas (barras) e o total de loca\xe7\xf5es (linha)."})]})]})}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)(Y,{data:_})})]})]})]})}):(0,s.jsx)(o.O,{children:(0,s.jsx)(r.DashboardLayout,{children:(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("p",{children:"Carregando dashboard..."})})})})}},81499:(e,t,a)=>{"use strict";a.d(t,{Hm:()=>f,Nt:()=>h,at:()=>u});var s=a(95155),l=a(12115),r=a(83540),o=a(94517),n=a(24026),i=a(59434);let d={light:"",dark:".dark"},c=l.createContext(null);function m(){let e=l.useContext(c);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let u=l.forwardRef((e,t)=>{let{id:a,className:o,children:n,config:d,...m}=e,u=l.useId(),h="chart-".concat(a||u.replace(/:/g,""));return(0,s.jsx)(c.Provider,{value:{config:d},children:(0,s.jsxs)("div",{"data-chart":h,ref:t,className:(0,i.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",o),...m,children:[(0,s.jsx)(x,{id:h,config:d}),(0,s.jsx)(r.u,{children:n})]})})});u.displayName="Chart";let x=e=>{let{id:t,config:a}=e,l=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return l.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(d).map(e=>{let[a,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(l.map(e=>{var t;let[s,l]=e,r=(null==(t=l.theme)?void 0:t[a])||l.color;return r?"  --color-".concat(s,": ").concat(r,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};o.m;let h=l.forwardRef((e,t)=>{let{active:a,payload:r,className:o,indicator:n="dot",hideLabel:d=!1,hideIndicator:c=!1,label:u,labelFormatter:x,labelClassName:h,formatter:f,color:j,nameKey:g,labelKey:v}=e,{config:N}=m(),b=l.useMemo(()=>{var e;if(d||!(null==r?void 0:r.length))return null;let[t]=r,a="".concat(v||t.dataKey||t.name||"value"),l=p(N,t,a),o=v||"string"!=typeof u?null==l?void 0:l.label:(null==(e=N[u])?void 0:e.label)||u;return x?(0,s.jsx)("div",{className:(0,i.cn)("font-medium",h),children:x(o,r)}):o?(0,s.jsx)("div",{className:(0,i.cn)("font-medium",h),children:o}):null},[u,x,r,d,h,N,v]);if(!a||!(null==r?void 0:r.length))return null;let y=1===r.length&&"dot"!==n;return(0,s.jsxs)("div",{ref:t,className:(0,i.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",o),children:[y?null:b,(0,s.jsx)("div",{className:"grid gap-1.5",children:r.map((e,t)=>{let a="".concat(g||e.name||e.dataKey||"value"),l=p(N,e,a),r=j||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,i.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===n&&"items-center"),children:f&&(null==e?void 0:e.value)!==void 0&&e.name?f(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==l?void 0:l.icon)?(0,s.jsx)(l.icon,{}):!c&&(0,s.jsx)("div",{className:(0,i.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===n,"w-1":"line"===n,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===n,"my-0.5":y&&"dashed"===n}),style:{"--color-bg":r,"--color-border":r}}),(0,s.jsxs)("div",{className:(0,i.cn)("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[y?b:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==l?void 0:l.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});h.displayName="ChartTooltip",n.s;let f=l.forwardRef((e,t)=>{let{className:a,hideIcon:l=!1,payload:r,verticalAlign:o="bottom",nameKey:n}=e,{config:d}=m();return(null==r?void 0:r.length)?(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center justify-center gap-4","top"===o?"pb-3":"pt-3",a),children:r.map(e=>{let t="".concat(n||e.dataKey||"value"),a=p(d,e,t);return(0,s.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!l?(0,s.jsx)(a.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null});function p(e,t,a){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,l=a;return a in t&&"string"==typeof t[a]?l=t[a]:s&&a in s&&"string"==typeof s[a]&&(l=s[a]),l in e?e[l]:e[a]}f.displayName="ChartLegend"}},e=>{var t=t=>e(e.s=t);e.O(0,[992,73,207,851,880,508,122,228,168,249,382,782,462,925,169,441,684,358],()=>t(44536)),_N_E=e.O()}]);