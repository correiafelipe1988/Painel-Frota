(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{40968:(e,a,t)=>{"use strict";t.d(a,{b:()=>c});var s=t(12115),r=t(63655),l=t(95155),n=s.forwardRef((e,a)=>(0,l.jsx)(r.sG.label,{...e,ref:a,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));n.displayName="Label";var c=n},59409:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>p,gC:()=>f,l6:()=>o,yv:()=>m});var s=t(95155),r=t(12115),l=t(93081),n=t(79556),c=t(77381),i=t(10518),d=t(59434);let o=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,a)=>{let{className:t,children:r,...c}=e;return(0,s.jsxs)(l.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...c,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let f=r.forwardRef((e,a)=>{let{className:t,children:r,position:n="popper",...c}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...c,children:[(0,s.jsx)(x,{}),(0,s.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(h,{})]})})});f.displayName=l.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let p=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,s.jsxs)(l.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});p.displayName=l.q7.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.wv.displayName},75074:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(40157).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},77070:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(40157).A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},85057:(e,a,t)=>{"use strict";t.d(a,{J:()=>d});var s=t(95155),r=t(12115),l=t(40968),n=t(74466),c=t(59434);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.b,{ref:a,className:(0,c.cn)(i(),t),...r})});d.displayName=l.b.displayName},85127:(e,a,t)=>{"use strict";t.d(a,{A0:()=>c,BF:()=>i,Hj:()=>d,XI:()=>n,nA:()=>m,nd:()=>o});var s=t(95155),r=t(12115),l=t(59434);let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",t),...r})})});n.displayName="Table";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",t),...r})});c.displayName="TableHeader";let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...r})});i.displayName="TableBody",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tr",{ref:a,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});d.displayName="TableRow";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("th",{ref:a,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});o.displayName="TableHead";let m=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("td",{ref:a,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});m.displayName="TableCell",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption"},89745:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var s=t(95155),r=t(12115),l=t(23169),n=t(49551),c=t(66695),i=t(85127),d=t(62523),o=t(85057),m=t(59409),u=t(30285),x=t(26126),h=t(80659),f=t(77070),p=t(60679),j=t(50286),g=t(75074),N=t(88390),v=t(78071),b=t(99591),y=t(53647),w=t(59434),R=t(87481);function k(){let[e,a]=(0,r.useState)([]),[t,k]=(0,r.useState)(!0),[A,C]=(0,r.useState)(""),[F,q]=(0,r.useState)("revenue"),[T,M]=(0,r.useState)("desc"),[D,S]=(0,r.useState)(""),[B,O]=(0,r.useState)(""),{toast:P}=(0,R.dj)();(0,r.useEffect)(()=>{k(!0);let e=(0,b.Ef)(e=>{Array.isArray(e)?a(e):(console.warn("Data from subscribeToMotorcycles (receita franqueados) was not an array:",e),a([])),k(!1)});return()=>e()},[]);let Z=(0,r.useMemo)(()=>{if(t||!Array.isArray(e))return[];let a=(0,y.VH)(e);if(A&&(a=a.filter(e=>e.franqueadoName.toLowerCase().includes(A.toLowerCase()))),D){let e=parseFloat(D);a=a.filter(a=>a.weeklyRevenue>=e)}if(B){let e=parseFloat(B);a=a.filter(a=>a.weeklyRevenue<=e)}return a.sort((e,a)=>{let t,s;switch(F){case"name":t=e.franqueadoName,s=a.franqueadoName;break;case"revenue":default:t=e.weeklyRevenue,s=a.weeklyRevenue;break;case"motorcycles":t=e.motorcycleCount,s=a.motorcycleCount;break;case"occupation":t=e.occupationRate,s=a.occupationRate;break;case"averageTicket":t=e.averageRevenuePerMoto,s=a.averageRevenuePerMoto}return"string"==typeof t&&"string"==typeof s?"asc"===T?t.localeCompare(s):s.localeCompare(t):"asc"===T?t-s:s-t}),a},[e,t,A,F,T,D,B]),J=(0,r.useMemo)(()=>{if(0===Z.length)return{totalRevenue:0,totalMotorcycles:0,averageOccupation:0,totalFranchisees:0};let e=Z.reduce((e,a)=>e+a.weeklyRevenue,0);return{totalRevenue:e,totalMotorcycles:Z.reduce((e,a)=>e+a.motorcycleCount,0),averageOccupation:Z.reduce((e,a)=>e+a.occupationRate,0)/Z.length,totalFranchisees:Z.length}},[Z]),L=e=>{F===e?M("asc"===T?"desc":"asc"):(q(e),M("desc"))},_=e=>"R$ ".concat(e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),E=e=>e>=91?{variant:"default",color:"bg-green-100 text-green-700"}:e>=85?{variant:"secondary",color:"bg-yellow-100 text-yellow-700"}:{variant:"destructive",color:"bg-red-100 text-red-700"},W=e=>{let{field:a}=e;return F!==a?null:"asc"===T?(0,s.jsx)(h.A,{className:"h-4 w-4 ml-1"}):(0,s.jsx)(f.A,{className:"h-4 w-4 ml-1"})},H=(0,s.jsxs)(u.$,{onClick:()=>{P({title:"Funcionalidade em Desenvolvimento",description:"A exporta\xe7\xe3o de dados de receita por franqueado ser\xe1 implementada em breve."})},variant:"default",className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Exportar"]});return(0,s.jsxs)(l.DashboardLayout,{children:[(0,s.jsx)(n.z,{title:"Receita por Franqueado",description:"An\xe1lise detalhada da receita semanal por franqueado",icon:j.A,iconContainerClassName:"bg-blue-600",actions:H}),(0,s.jsxs)(c.Zp,{className:"mb-6",children:[(0,s.jsx)(c.aR,{children:(0,s.jsxs)(c.ZB,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"h-5 w-5"}),"Filtros e Busca"]})}),(0,s.jsx)(c.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"search",children:"Buscar Franqueado"}),(0,s.jsx)(d.p,{id:"search",placeholder:"Nome do franqueado...",value:A,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"min-revenue",children:"Receita M\xednima (R$)"}),(0,s.jsx)(d.p,{id:"min-revenue",type:"number",placeholder:"0.00",value:D,onChange:e=>S(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"max-revenue",children:"Receita M\xe1xima (R$)"}),(0,s.jsx)(d.p,{id:"max-revenue",type:"number",placeholder:"10000.00",value:B,onChange:e=>O(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.J,{htmlFor:"sort",children:"Ordenar por"}),(0,s.jsxs)(m.l6,{value:F,onValueChange:e=>q(e),children:[(0,s.jsx)(m.bq,{id:"sort",children:(0,s.jsx)(m.yv,{})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"revenue",children:"Receita"}),(0,s.jsx)(m.eb,{value:"name",children:"Nome"}),(0,s.jsx)(m.eb,{value:"motorcycles",children:"Qtd Motos"}),(0,s.jsx)(m.eb,{value:"occupation",children:"Taxa Ocupa\xe7\xe3o"}),(0,s.jsx)(m.eb,{value:"averageTicket",children:"Ticket M\xe9dio"})]})]})]})]})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[(0,s.jsx)(c.Zp,{children:(0,s.jsx)(c.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.A,{className:"h-5 w-5 text-green-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receita Total"}),(0,s.jsx)("p",{className:"text-lg font-bold text-green-600",children:_(J.totalRevenue)})]})]})})}),(0,s.jsx)(c.Zp,{children:(0,s.jsx)(c.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.A,{className:"h-5 w-5 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Motos"}),(0,s.jsx)("p",{className:"text-lg font-bold text-blue-600",children:J.totalMotorcycles})]})]})})}),(0,s.jsx)(c.Zp,{children:(0,s.jsx)(c.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-5 w-5 text-purple-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Franqueados"}),(0,s.jsx)("p",{className:"text-lg font-bold text-purple-600",children:J.totalFranchisees})]})]})})}),(0,s.jsx)(c.Zp,{children:(0,s.jsx)(c.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 text-orange-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ocupa\xe7\xe3o M\xe9dia"}),(0,s.jsxs)("p",{className:"text-lg font-bold text-orange-600",children:[J.averageOccupation.toFixed(1),"%"]})]})]})})})]}),(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(N.A,{className:"h-6 w-6 text-green-600"}),"Receita Detalhada por Franqueado"]}),(0,s.jsxs)(c.BT,{children:[Z.length," franqueado(s) encontrado(s)"]})]}),(0,s.jsx)(c.Wu,{children:t?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{children:"Carregando dados de receita..."})}):0===Z.length?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Nenhum franqueado encontrado com os filtros aplicados."})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(i.XI,{children:[(0,s.jsx)(i.A0,{children:(0,s.jsxs)(i.Hj,{children:[(0,s.jsx)(i.nd,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>L("name"),children:(0,s.jsxs)("div",{className:"flex items-center",children:["Franqueado",(0,s.jsx)(W,{field:"name"})]})}),(0,s.jsx)(i.nd,{className:"text-right cursor-pointer hover:bg-gray-50",onClick:()=>L("revenue"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end",children:["Receita Semanal",(0,s.jsx)(W,{field:"revenue"})]})}),(0,s.jsx)(i.nd,{className:"text-right",children:"Receita Mensal"}),(0,s.jsx)(i.nd,{className:"text-right cursor-pointer hover:bg-gray-50",onClick:()=>L("motorcycles"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end",children:["Qtd Motos",(0,s.jsx)(W,{field:"motorcycles"})]})}),(0,s.jsx)(i.nd,{className:"text-right cursor-pointer hover:bg-gray-50",onClick:()=>L("averageTicket"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end",children:["Ticket M\xe9dio",(0,s.jsx)(W,{field:"averageTicket"})]})}),(0,s.jsx)(i.nd,{className:"text-right cursor-pointer hover:bg-gray-50",onClick:()=>L("occupation"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end",children:["Taxa Ocupa\xe7\xe3o",(0,s.jsx)(W,{field:"occupation"})]})})]})}),(0,s.jsx)(i.BF,{children:Z.map(e=>{let a=E(e.occupationRate);return(0,s.jsxs)(i.Hj,{className:"hover:bg-gray-50",children:[(0,s.jsx)(i.nA,{className:"font-medium",children:e.franqueadoName}),(0,s.jsx)(i.nA,{className:"text-right font-bold text-green-600",children:_(e.weeklyRevenue)}),(0,s.jsx)(i.nA,{className:"text-right text-blue-600",children:_(e.monthlyRevenue)}),(0,s.jsx)(i.nA,{className:"text-right",children:e.motorcycleCount}),(0,s.jsx)(i.nA,{className:"text-right",children:_(e.averageRevenuePerMoto)}),(0,s.jsx)(i.nA,{className:"text-right",children:(0,s.jsxs)(x.E,{className:(0,w.cn)("font-medium",a.color),children:[e.occupationRate.toFixed(1),"%"]})})]},e.franqueadoName)})})]})})})]})]})}},93530:(e,a,t)=>{Promise.resolve().then(t.bind(t,89745))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,73,207,851,880,508,122,168,925,169,199,441,684,358],()=>a(93530)),_N_E=e.O()}]);