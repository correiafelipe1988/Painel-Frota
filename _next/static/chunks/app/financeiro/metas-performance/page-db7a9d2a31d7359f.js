(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{14459:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>M});var t=s(95155),r=s(12115),l=s(23169),n=s(49551),c=s(66695),o=s(85127),i=s(26126),d=s(30285),m=s(28857);let x=(0,s(40157).A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var u=s(58127),h=s(80659),g=s(31949),f=s(60679),p=s(81203),j=s(99591),v=s(53647),N=s(59434),b=s(87481),y=s(83540),R=s(8782),w=s(34e3),T=s(54811),k=s(94517);let P={occupationRate:91,monthlyRevenueTarget:5e4,averageTicketTarget:400,franchiseeCountTarget:50},A={success:"hsl(142.1 76.2% 36.3%)",warning:"hsl(47.9 95.8% 53.1%)",danger:"hsl(0 84.2% 60.2%)",info:"hsl(221.2 83.2% 53.3%)"};function M(){let[e,a]=(0,r.useState)([]),[s,M]=(0,r.useState)(!0),{toast:B}=(0,b.dj)();(0,r.useEffect)(()=>{M(!0);let e=(0,j.Ef)(e=>{Array.isArray(e)?a(e):(console.warn("Data from subscribeToMotorcycles (metas performance) was not an array:",e),a([])),M(!1)});return()=>e()},[]);let C=(0,r.useMemo)(()=>{if(s||!Array.isArray(e))return{goalAnalysis:{totalFranchisees:0,franchiseesAboveGoal:0,franchiseesBelowGoal:0,averageOccupation:0,goalAchievementRate:0,topPerformers:[],needsImprovement:[]},franchiseeRevenues:[],kpis:{totalWeeklyRevenue:0,totalMonthlyRevenue:0,averageRevenuePerFranchisee:0,totalRentedMotorcycles:0,financialOccupationRate:0,revenueGrowth:0,averageTicketPerMoto:0},goalProgress:{occupationRate:0,monthlyRevenue:0,averageTicket:0,franchiseeCount:0},performanceDistribution:[]};let a=(0,v.CN)(e),t=(0,v.VH)(e),r=(0,v.l)(e),l={occupationRate:Math.min(r.financialOccupationRate/P.occupationRate*100,100),monthlyRevenue:Math.min(r.totalMonthlyRevenue/P.monthlyRevenueTarget*100,100),averageTicket:Math.min(r.averageTicketPerMoto/P.averageTicketTarget*100,100),franchiseeCount:Math.min(t.length/P.franchiseeCountTarget*100,100)},n=t.filter(e=>e.occupationRate>=95).length,c=t.filter(e=>e.occupationRate>=91&&e.occupationRate<95).length,o=t.filter(e=>e.occupationRate>=80&&e.occupationRate<91).length,i=t.filter(e=>e.occupationRate<80).length;return{goalAnalysis:a,franchiseeRevenues:t,kpis:r,goalProgress:l,performanceDistribution:[{name:"Excelente (≥95%)",value:n,color:A.success},{name:"Bom (91-94%)",value:c,color:A.info},{name:"M\xe9dio (80-90%)",value:o,color:A.warning},{name:"Baixo (<80%)",value:i,color:A.danger}].filter(e=>e.value>0)}},[e,s]),D=e=>"R$ ".concat(e.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),E=e=>"".concat(e.toFixed(1),"%"),F=e=>e>=95?{label:"Excelente",color:"bg-green-100 text-green-700",icon:x}:e>=91?{label:"Bom",color:"bg-blue-100 text-blue-700",icon:u.A}:e>=80?{label:"M\xe9dio",color:"bg-yellow-100 text-yellow-700",icon:h.A}:{label:"Baixo",color:"bg-red-100 text-red-700",icon:g.A},Z=e=>e>=100?{color:A.success,status:"Atingida"}:e>=80?{color:A.warning,status:"Pr\xf3xima"}:{color:A.danger,status:"Distante"},q=(0,t.jsxs)(d.$,{onClick:()=>{B({title:"Funcionalidade em Desenvolvimento",description:"A exporta\xe7\xe3o de dados de metas e performance ser\xe1 implementada em breve."})},variant:"default",className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Exportar"]});return s?(0,t.jsxs)(l.DashboardLayout,{children:[(0,t.jsx)(n.z,{title:"Metas e Performance",description:"Acompanhamento de metas e an\xe1lise de performance",actions:q}),(0,t.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,t.jsx)("p",{children:"Carregando dados de performance..."})})]}):(0,t.jsxs)(l.DashboardLayout,{children:[(0,t.jsx)(n.z,{title:"Metas e Performance",description:"Acompanhamento de metas e an\xe1lise de performance",icon:p.A,iconContainerClassName:"bg-orange-600",actions:q}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mt-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Taxa de Ocupa\xe7\xe3o"}),(0,t.jsxs)(c.BT,{className:"text-xs",children:["Meta: ",P.occupationRate,"%"]})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-2xl font-bold",children:E(C.kpis.financialOccupationRate)}),(0,t.jsx)(i.E,{className:(0,N.cn)("text-xs",Z(C.goalProgress.occupationRate).color===A.success?"bg-green-100 text-green-700":Z(C.goalProgress.occupationRate).color===A.warning?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:Z(C.goalProgress.occupationRate).status})]}),(0,t.jsx)(m.k,{value:C.goalProgress.occupationRate,className:"h-2"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[E(C.goalProgress.occupationRate)," da meta"]})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Receita Mensal"}),(0,t.jsxs)(c.BT,{className:"text-xs",children:["Meta: ",D(P.monthlyRevenueTarget)]})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-2xl font-bold",children:D(C.kpis.totalMonthlyRevenue)}),(0,t.jsx)(i.E,{className:(0,N.cn)("text-xs",Z(C.goalProgress.monthlyRevenue).color===A.success?"bg-green-100 text-green-700":Z(C.goalProgress.monthlyRevenue).color===A.warning?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:Z(C.goalProgress.monthlyRevenue).status})]}),(0,t.jsx)(m.k,{value:C.goalProgress.monthlyRevenue,className:"h-2"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[E(C.goalProgress.monthlyRevenue)," da meta"]})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Ticket M\xe9dio"}),(0,t.jsxs)(c.BT,{className:"text-xs",children:["Meta: ",D(P.averageTicketTarget)]})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-2xl font-bold",children:D(C.kpis.averageTicketPerMoto)}),(0,t.jsx)(i.E,{className:(0,N.cn)("text-xs",Z(C.goalProgress.averageTicket).color===A.success?"bg-green-100 text-green-700":Z(C.goalProgress.averageTicket).color===A.warning?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:Z(C.goalProgress.averageTicket).status})]}),(0,t.jsx)(m.k,{value:C.goalProgress.averageTicket,className:"h-2"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[E(C.goalProgress.averageTicket)," da meta"]})]})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Franqueados Ativos"}),(0,t.jsxs)(c.BT,{className:"text-xs",children:["Meta: ",P.franchiseeCountTarget]})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-2xl font-bold",children:C.franchiseeRevenues.length}),(0,t.jsx)(i.E,{className:(0,N.cn)("text-xs",Z(C.goalProgress.franchiseeCount).color===A.success?"bg-green-100 text-green-700":Z(C.goalProgress.franchiseeCount).color===A.warning?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:Z(C.goalProgress.franchiseeCount).status})]}),(0,t.jsx)(m.k,{value:C.goalProgress.franchiseeCount,className:"h-2"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[E(C.goalProgress.franchiseeCount)," da meta"]})]})})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 mt-8",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-5 w-5 text-orange-600"}),"Distribui\xe7\xe3o de Performance"]}),(0,t.jsx)(c.BT,{children:"Classifica\xe7\xe3o dos franqueados por taxa de ocupa\xe7\xe3o"})]}),(0,t.jsx)(c.Wu,{children:C.performanceDistribution.length>0?(0,t.jsx)(y.u,{width:"100%",height:250,children:(0,t.jsxs)(R.r,{children:[(0,t.jsx)(w.F,{data:C.performanceDistribution,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:a,value:s}=e;return"".concat(a,": ").concat(s)},children:C.performanceDistribution.map((e,a)=>(0,t.jsx)(T.f,{fill:e.color},"cell-".concat(a)))}),(0,t.jsx)(k.m,{formatter:e=>[e,"Franqueados"]})]})}):(0,t.jsx)("div",{className:"flex justify-center items-center h-[250px]",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nenhum dado dispon\xedvel"})})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(x,{className:"h-5 w-5 text-green-600"}),"Top & Bottom Performers"]}),(0,t.jsx)(c.BT,{children:"Melhores e piores performances"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-green-600 mb-2",children:"\uD83C\uDFC6 Top 3 Performers"}),C.goalAnalysis.topPerformers.slice(0,3).map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,t.jsxs)("span",{className:"text-sm",children:[a+1,". ",e.franqueadoName]}),(0,t.jsx)(i.E,{className:"bg-green-100 text-green-700",children:E(e.occupationRate)})]},e.franqueadoName))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-red-600 mb-2",children:"⚠️ Precisam Melhorar"}),C.goalAnalysis.needsImprovement.slice(0,3).map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,t.jsx)("span",{className:"text-sm",children:e.franqueadoName}),(0,t.jsx)(i.E,{className:"bg-red-100 text-red-700",children:E(e.occupationRate)})]},e.franqueadoName))]})]})})]})]}),(0,t.jsxs)(c.Zp,{className:"mt-8",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-6 w-6 text-blue-600"}),"Performance Detalhada por Franqueado"]}),(0,t.jsx)(c.BT,{children:"An\xe1lise completa de performance vs. metas estabelecidas"})]}),(0,t.jsx)(c.Wu,{children:0===C.franchiseeRevenues.length?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nenhum dado de performance dispon\xedvel."})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Franqueado"}),(0,t.jsx)(o.nd,{className:"text-right",children:"Receita Semanal"}),(0,t.jsx)(o.nd,{className:"text-right",children:"Qtd Motos"}),(0,t.jsx)(o.nd,{className:"text-right",children:"Taxa Ocupa\xe7\xe3o"}),(0,t.jsx)(o.nd,{className:"text-right",children:"Ticket M\xe9dio"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Status"})]})}),(0,t.jsx)(o.BF,{children:C.franchiseeRevenues.map(e=>{let a=F(e.occupationRate),s=a.icon;return(0,t.jsxs)(o.Hj,{className:"hover:bg-gray-50",children:[(0,t.jsx)(o.nA,{className:"font-medium",children:e.franqueadoName}),(0,t.jsx)(o.nA,{className:"text-right font-bold text-green-600",children:D(e.weeklyRevenue)}),(0,t.jsx)(o.nA,{className:"text-right",children:e.motorcycleCount}),(0,t.jsx)(o.nA,{className:"text-right",children:(0,t.jsx)(i.E,{className:(0,N.cn)("font-medium",a.color),children:E(e.occupationRate)})}),(0,t.jsx)(o.nA,{className:"text-right",children:D(e.averageRevenuePerMoto)}),(0,t.jsx)(o.nA,{className:"text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(s,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:a.label})]})})]},e.franqueadoName)})})]})})})]})]})}},15242:(e,a,s)=>{Promise.resolve().then(s.bind(s,14459))},28857:(e,a,s)=>{"use strict";s.d(a,{k:()=>b});var t=s(95155),r=s(12115),l=s(46081),n=s(63655),c="Progress",[o,i]=(0,l.A)(c),[d,m]=o(c),x=r.forwardRef((e,a)=>{var s,r,l,c;let{__scopeProgress:o,value:i=null,max:m,getValueLabel:x=g,...u}=e;(m||0===m)&&!j(m)&&console.error((s="".concat(m),r="Progress","Invalid prop `max` of value `".concat(s,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let h=j(m)?m:100;null===i||v(i,h)||console.error((l="".concat(i),c="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(c,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let N=v(i,h)?i:null,b=p(N)?x(N,h):void 0;return(0,t.jsx)(d,{scope:o,value:N,max:h,children:(0,t.jsx)(n.sG.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":p(N)?N:void 0,"aria-valuetext":b,role:"progressbar","data-state":f(N,h),"data-value":null!=N?N:void 0,"data-max":h,...u,ref:a})})});x.displayName=c;var u="ProgressIndicator",h=r.forwardRef((e,a)=>{var s;let{__scopeProgress:r,...l}=e,c=m(u,r);return(0,t.jsx)(n.sG.div,{"data-state":f(c.value,c.max),"data-value":null!=(s=c.value)?s:void 0,"data-max":c.max,...l,ref:a})});function g(e,a){return"".concat(Math.round(e/a*100),"%")}function f(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function p(e){return"number"==typeof e}function j(e){return p(e)&&!isNaN(e)&&e>0}function v(e,a){return p(e)&&!isNaN(e)&&e<=a&&e>=0}h.displayName=u;var N=s(59434);let b=r.forwardRef((e,a)=>{let{className:s,value:r,...l}=e;return(0,t.jsx)(x,{ref:a,className:(0,N.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,t.jsx)(h,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});b.displayName=x.displayName},31949:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(40157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},81203:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(40157).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},85127:(e,a,s)=>{"use strict";s.d(a,{A0:()=>c,BF:()=>o,Hj:()=>i,XI:()=>n,nA:()=>m,nd:()=>d});var t=s(95155),r=s(12115),l=s(59434);let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",s),...r})})});n.displayName="Table";let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",s),...r})});c.displayName="TableHeader";let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...r})});o.displayName="TableBody",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("tr",{ref:a,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});i.displayName="TableRow";let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("th",{ref:a,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});d.displayName="TableHead";let m=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("td",{ref:a,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});m.displayName="TableCell",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"}},e=>{var a=a=>e(e.s=a);e.O(0,[992,73,207,851,880,508,228,168,782,925,169,199,441,684,358],()=>a(15242)),_N_E=e.O()}]);