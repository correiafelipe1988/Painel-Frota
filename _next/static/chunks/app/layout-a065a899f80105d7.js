(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{52558:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>v});var r=a(95155),o=a(87481),s=a(12115),i=a(26621),n=a(74466),d=a(25318),c=a(59434);let l=i.Kq,u=s.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(i.LM,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...o})});u.displayName=i.LM.displayName;let f=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),p=s.forwardRef((e,t)=>{let{className:a,variant:o,...s}=e;return(0,r.jsx)(i.bL,{ref:t,className:(0,c.cn)(f({variant:o}),a),...s})});p.displayName=i.bL.displayName,s.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(i.rc,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...o})}).displayName=i.rc.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(i.bm,{ref:t,className:(0,c.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...o,children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})});m.displayName=i.bm.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(i.hE,{ref:t,className:(0,c.cn)("text-sm font-semibold",a),...o})});g.displayName=i.hE.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(i.VY,{ref:t,className:(0,c.cn)("text-sm opacity-90",a),...o})});function v(){let{toasts:e}=(0,o.dj)();return(0,r.jsxs)(l,{children:[e.map(function(e){let{id:t,title:a,description:o,action:s,...i}=e;return(0,r.jsxs)(p,{...i,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[a&&(0,r.jsx)(g,{children:a}),o&&(0,r.jsx)(h,{children:o})]}),s,(0,r.jsx)(m,{})]},t)}),(0,r.jsx)(u,{})]})}h.displayName=i.VY.displayName},52728:()=>{},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s,j:()=>n,k:()=>i});var r=a(52596),o=a(39688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}let i=e=>{if(!e)return"N/Definido";switch(e){case"active":return"Ativa";case"alugada":return"Alugada";case"manutencao":return"Manuten\xe7\xe3o";case"sucata":return"Sucata";case"sinistro":return"Sinistro";case"furtada":return"Furtada";case"apropriacao_indebita":return"Apropria\xe7\xe3o Ind\xe9bita";case"nao_transferida":return"N\xe3o Transferida";case"vendida":return"Vendida";case"nao_localizada":return"N\xe3o Localizada";default:return e.charAt(0).toUpperCase()+e.slice(1)}},n=e=>e.toLowerCase().trim().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"")},59576:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>l});var r=a(95155),o=a(12115),s=a(93004),i=a(67039),n=a(87481);let d=(0,o.createContext)(void 0);function c(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("useAuth deve ser usado dentro de um AuthProvider");return e}function l(e){let{children:t}=e,[a,c]=(0,o.useState)(null),[l,u]=(0,o.useState)(!0),[f,p]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=!0,t=(()=>{{let e=localStorage.getItem("firebase_user");if(e)try{let t=JSON.parse(e);return console.log("Found saved user in localStorage:",t.email),p(!0),!0}catch(e){console.warn("Error parsing saved user:",e),localStorage.removeItem("firebase_user")}}return p(!0),!1})(),r=(0,s.hg)(i.j,t=>{if(e)if(console.log("Auth state changed:",t?"User logged in: ".concat(t.email):"User logged out"),c(t),u(!1),p(!0),t){let e={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,timestamp:Date.now()};try{localStorage.setItem("firebase_user",JSON.stringify(e)),console.log("User data saved to localStorage:",e.email)}catch(e){console.warn("Failed to save user data to localStorage:",e)}}else try{localStorage.removeItem("firebase_user"),console.log("User data removed from localStorage")}catch(e){console.warn("Failed to remove user data from localStorage:",e)}},t=>{e&&(console.error("Auth state change error:",t),u(!1),p(!0))});if(t){let t=setTimeout(()=>{e&&!a&&(console.log("Stored user found but Firebase Auth not restored, setting loading to false"),u(!1))},4e3);return()=>{e=!1,r(),clearTimeout(t)}}{let t=setTimeout(()=>{e&&!f&&(console.log("Timeout reached, setting loading to false"),u(!1),p(!0))},3e3);return()=>{e=!1,r(),clearTimeout(t)}}},[f,a]);let h=async(e,t)=>{try{await (0,s.x9)(i.j,e,t),(0,n.oR)({title:"Login realizado com sucesso!",description:"Bem-vindo ao Controle de Frota"})}catch(t){let e="Erro ao fazer login";switch(t.code){case"auth/api-key-not-valid":e="Chave de API do Firebase inv\xe1lida. Verifique a configura\xe7\xe3o.";break;case"auth/user-not-found":e="Usu\xe1rio n\xe3o encontrado";break;case"auth/wrong-password":e="Senha incorreta";break;case"auth/invalid-email":e="Email inv\xe1lido";break;case"auth/user-disabled":e="Usu\xe1rio desabilitado";break;case"auth/too-many-requests":e="Muitas tentativas. Tente novamente mais tarde";break;case"auth/invalid-credential":e="Credenciais inv\xe1lidas";break;case"auth/network-request-failed":e="Erro de rede. Verifique sua conex\xe3o.";break;default:e=t.message||"Erro desconhecido"}throw(0,n.oR)({title:"Erro no login",description:e,variant:"destructive"}),t}},v=async(e,t,a)=>{try{let r=await (0,s.eJ)(i.j,e,t);await (0,s.r7)(r.user,{displayName:a}),(0,n.oR)({title:"Conta criada com sucesso!",description:"Bem-vindo ao Controle de Frota"})}catch(t){let e="Erro ao criar conta";switch(t.code){case"auth/email-already-in-use":e="Este email j\xe1 est\xe1 em uso";break;case"auth/invalid-email":e="Email inv\xe1lido";break;case"auth/weak-password":e="A senha deve ter pelo menos 6 caracteres";break;default:e=t.message||"Erro desconhecido"}throw(0,n.oR)({title:"Erro ao criar conta",description:e,variant:"destructive"}),t}},b=async()=>{try{await (0,s.CI)(i.j),(0,n.oR)({title:"Logout realizado",description:"At\xe9 logo!"})}catch(e){throw(0,n.oR)({title:"Erro ao fazer logout",description:e.message||"Erro desconhecido",variant:"destructive"}),e}};return(0,r.jsx)(d.Provider,{value:{user:a,loading:l,signIn:h,signUp:v,logout:b},children:t})}},67039:(e,t,a)=>{"use strict";let r,o,s;a.d(t,{db:()=>o,j:()=>s});var i=a(23915),n=a(35317),d=a(93004);let c={apiKey:"AIzaSyAK9MlA66PHTODqKxCrwTIe0t8Kgy_eORk",authDomain:"painel-frota-ecdef.firebaseapp.com",projectId:"painel-frota-ecdef",storageBucket:"painel-frota-ecdef.firebasestorage.app",messagingSenderId:"991296626584",appId:"1:991296626584:web:ee98ee02ca1e9cde38d5ed"},l=Object.entries(c).filter(e=>{let[t,a]=e;return!a}).map(e=>{let[t]=e;return"NEXT_PUBLIC_FIREBASE_".concat(t.toUpperCase())});if(l.length>0)throw Error("Vari\xe1veis de ambiente do Firebase n\xe3o encontradas: ".concat(l.join(", ")));let u={apiKey:c.apiKey,authDomain:c.authDomain,projectId:c.projectId,storageBucket:c.storageBucket,messagingSenderId:c.messagingSenderId,appId:c.appId};try{r=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)(u),o=(0,n.aU)(r),s=(0,d.xI)(r),(0,d.oM)(s,d.F0).catch(e=>{console.warn("Erro ao configurar persist\xeancia do Firebase Auth:",e)})}catch(e){throw console.error("Erro ao inicializar Firebase:",e),e}},70778:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,52728,23)),Promise.resolve().then(a.bind(a,52558)),Promise.resolve().then(a.bind(a,59576))},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f,oR:()=>u});var r=a(12115);let o=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function l(e){c=n(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[690,992,73,207,880,2,441,684,358],()=>t(70778)),_N_E=e.O()}]);