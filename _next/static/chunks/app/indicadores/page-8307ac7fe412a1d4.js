(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{49551:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var s=a(95155),r=a(59434);function l(e){let{title:t,description:a,actions:l,icon:n,iconContainerClassName:i}=e;return(0,s.jsxs)("div",{className:"mb-6 md:flex md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1 flex items-center gap-3",children:[n&&(0,s.jsx)("div",{className:(0,r.cn)("p-2 rounded-lg",i),children:(0,s.jsx)(n,{className:"h-8 w-8 text-primary-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold leading-7 text-foreground sm:truncate sm:text-3xl sm:tracking-tight font-headline",children:t}),a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:a})]})]}),l&&(0,s.jsx)("div",{className:"mt-4 flex flex-shrink-0 md:ml-4 md:mt-0 gap-2",children:l})]})}},70831:(e,t,a)=>{"use strict";a.d(t,{f:()=>l});var s=a(35476),r=a(92084);function l(e,t){let a=(0,s.a)(e);return isNaN(t)?(0,r.w)(e,NaN):(t&&a.setDate(a.getDate()+t),a)}},78816:(e,t,a)=>{"use strict";a.d(t,{e:()=>r});var s=a(70831);function r(e,t){return(0,s.f)(e,-t)}},94933:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95155),r=a(12115),l=a(23169),n=a(49551),i=a(66695),d=a(83540),c=a(8782),o=a(34e3),u=a(54811),m=a(59434);let x={green:"hsl(var(--accent))",yellow:"hsl(45, 100%, 50%)",red:"hsl(var(--destructive))",gray:"hsl(var(--muted))"};function f(e){let{title:t,percentageValue:a,color:r,plannedValue:l,realizedValue:n,unit:f}=e,h=Math.min(Math.max(0,a),150),g=[{name:"value",value:h,fill:x[r]},{name:"remaining",value:Math.max(0,150-h),fill:x.gray}];return(0,s.jsxs)(i.Zp,{className:"shadow-lg flex flex-col items-center text-center",children:[(0,s.jsx)(i.aR,{className:"pb-1 pt-4 w-full",children:(0,s.jsx)(i.ZB,{className:"text-base font-semibold text-muted-foreground",children:t})}),(0,s.jsxs)(i.Wu,{className:"flex flex-col items-center p-3 pt-0",children:[(0,s.jsxs)("div",{className:"relative w-48 h-[96px]",children:[" ",(0,s.jsx)(d.u,{width:"100%",height:"100%",children:(0,s.jsx)(c.r,{children:(0,s.jsx)(o.F,{data:g,cx:"50%",cy:"100%",startAngle:180,endAngle:0,innerRadius:"65%",outerRadius:"95%",paddingAngle:0,dataKey:"value",stroke:"none",children:g.map((e,t)=>(0,s.jsx)(u.f,{fill:e.fill},"cell-".concat(t)))})})}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center top-[-15px]",children:[(0,s.jsx)("span",{className:(0,m.cn)("text-3xl font-bold","green"===r?"text-accent":"yellow"===r?"text-yellow-500":"red"===r?"text-destructive":"text-foreground"),children:a.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1})}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"%"})]}),(0,s.jsx)("span",{className:"absolute bottom-[-5px] left-[10px] text-xs text-muted-foreground",children:"0"}),(0,s.jsx)("span",{className:"absolute bottom-[-5px] right-[10px] text-xs text-muted-foreground",children:"150"})]}),(0,s.jsxs)("div",{className:"text-center mt-1 text-xs text-muted-foreground",children:[(0,s.jsxs)("p",{children:["Planejado: ",l,f||""]}),(0,s.jsxs)("p",{children:["Realizado: ",n,f||""]})]})]})]})}var h=a(80659),g=a(78071),p=a(99591),j=a(78816),v=a(35476),N=a(73168);function b(){let[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{i(!0);let e=(0,p.Ef)(e=>{if(!Array.isArray(e)){console.warn("Data from subscribeToMotorcycles (indicadores page) was not an array:",e),t(null),i(!1);return}let a=new Date,s=function(e,t){let a=(0,v.a)(e.start),s=(0,v.a)(e.end),r=+a>+s,l=r?+a:+s,n=r?s:a;n.setHours(0,0,0,0);let i=1;if(!i)return[];i<0&&(i=-i,r=!r);let d=[];for(;+n<=l;)d.push((0,v.a)(n)),n.setDate(n.getDate()+i),n.setHours(0,0,0,0);return r?d.reverse():d}({start:(0,j.e)(a,29),end:a}),r=0;s.forEach(t=>{let a=(0,N.GP)(t,"yyyy-MM-dd"),s=e.filter(e=>!!e.data_ultima_mov&&!!e.status&&e.data_ultima_mov===a&&"alugada"===e.status).length;r+=s}),t({mediaLocacoesDiarias:parseFloat((s.length>0?r/s.length:0).toFixed(2)),totalLocacoesNoPeriodo:r}),i(!1)});return()=>e()},[]);let d=(()=>{if(!e)return{title:"Volume M\xe9dio de Loca\xe7\xf5es Di\xe1rias",percentageValue:0,color:"red",plannedValue:"Meta: ".concat(10,"/dia"),realizedValue:"Calculando...",unit:" loca\xe7\xf5es/dia",displayValueForCenter:0};let{mediaLocacoesDiarias:t}=e,a="red";return t>=9?a="green":t>=6&&(a="yellow"),{title:"Volume M\xe9dio de Loca\xe7\xf5es Di\xe1rias",percentageValue:t,color:a,plannedValue:"Meta: ".concat(10,"/dia"),realizedValue:"".concat(t.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1})),unit:" loca\xe7\xf5es/dia"}})();return(0,s.jsxs)(l.DashboardLayout,{children:[(0,s.jsx)(n.z,{title:"Indicadores Chave de Performance",description:"Acompanhe as principais m\xe9tricas e KPIs do sistema.",icon:h.A,iconContainerClassName:"bg-primary"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6 pb-6",children:a?(0,s.jsxs)("div",{className:"col-span-full flex flex-col items-center justify-center p-8 border-2 border-dashed border-border rounded-lg min-h-[200px] bg-muted/50",children:[(0,s.jsx)(g.A,{className:"h-16 w-16 text-muted-foreground mb-4 animate-pulse"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center",children:"Carregando indicador de volume m\xe9dio de loca\xe7\xf5es..."})]}):null!==e?(0,s.jsx)(f,{title:d.title,percentageValue:d.percentageValue,color:d.color,plannedValue:d.plannedValue,realizedValue:d.realizedValue,unit:d.unit},d.title):(0,s.jsxs)("div",{className:"col-span-full flex flex-col items-center justify-center p-8 border-2 border-dashed border-border rounded-lg min-h-[200px] bg-muted/50",children:[(0,s.jsx)(h.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsxs)("p",{className:"text-muted-foreground text-center",children:["N\xe3o foi poss\xedvel carregar os dados para o indicador de volume m\xe9dio de loca\xe7\xf5es.",(0,s.jsx)("br",{}),"Verifique se h\xe1 motocicletas com movimenta\xe7\xf5es recentes."]})]})})]})}},97991:(e,t,a)=>{Promise.resolve().then(a.bind(a,94933))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,73,207,851,880,508,228,168,782,925,169,441,684,358],()=>t(97991)),_N_E=e.O()}]);