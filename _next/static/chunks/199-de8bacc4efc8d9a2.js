"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{5637:(e,t,a)=>{a.d(t,{t:()=>r});var l=a(35476);function r(e){return(0,l.a)(e).getMonth()}},49551:(e,t,a)=>{a.d(t,{z:()=>n});var l=a(95155),r=a(59434);function n(e){let{title:t,description:a,actions:n,icon:u,iconContainerClassName:o}=e;return(0,l.jsxs)("div",{className:"mb-6 md:flex md:items-center md:justify-between",children:[(0,l.jsxs)("div",{className:"min-w-0 flex-1 flex items-center gap-3",children:[u&&(0,l.jsx)("div",{className:(0,r.cn)("p-2 rounded-lg",o),children:(0,l.jsx)(u,{className:"h-8 w-8 text-primary-foreground"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold leading-7 text-foreground sm:truncate sm:text-3xl sm:tracking-tight font-headline",children:t}),a&&(0,l.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:a})]})]}),n&&(0,l.jsx)("div",{className:"mt-4 flex flex-shrink-0 md:ml-4 md:mt-0 gap-2",children:n})]})}},53647:(e,t,a)=>{a.d(t,{Ad:()=>h,CN:()=>v,Ju:()=>f,VH:()=>c,kW:()=>d,l:()=>m,wF:()=>s,wN:()=>g});var l=a(73168),r=a(83343),n=a(44861),u=a(5637);function o(e){let t={};e.forEach(e=>{if(e.model&&e.valorSemanal&&e.valorSemanal>0){let a=e.model.trim().toLowerCase();t[a]||(t[a]={total:0,count:0}),t[a].total+=e.valorSemanal,t[a].count+=1}});let a={};return Object.entries(t).forEach(e=>{let[t,l]=e;a[t]=l.count>0?l.total/l.count:0}),a}function i(e,t){if(e.valorSemanal&&e.valorSemanal>0)return e.valorSemanal;if(e.model){let a=t[e.model.trim().toLowerCase()];if(a&&a>0)return a}return 0}function c(e,t,a){let l=o(e),r={};e.forEach(e=>{if(!e.placa)return;let t=r[e.placa];if(t){let a=t.data_ultima_mov,l=e.data_ultima_mov;l&&a?new Date(l)>new Date(a)&&(r[e.placa]=e):l&&!a&&(r[e.placa]=e)}else r[e.placa]=e});let n=Object.values(r);return Object.entries(n.filter(e=>"alugada"===e.status&&e.franqueado&&""!==e.franqueado.trim()).reduce((e,t)=>{let a=t.franqueado.trim();return e[a]||(e[a]=[]),e[a].push(t),e},{})).map(e=>{let[r,u]=e,o=u.reduce((e,r)=>e+function(e,t,a,l){let r=i(e,t);return r<=0||a&&l&&"alugada"!==e.status?0:r}(r,l,t,a),0),c=u.length;u.filter(e=>e.valorSemanal&&e.valorSemanal>0).length,u.filter(e=>!(e.valorSemanal&&e.valorSemanal>0)&&i(e,l)>0).length;let m=n.filter(e=>{var t;return(null==(t=e.franqueado)?void 0:t.trim())===r}).length;return{franqueadoName:r,totalRevenue:o,weeklyRevenue:o,monthlyRevenue:4.33*o,motorcycleCount:c,motorcycles:u,averageRevenuePerMoto:c>0?o/c:0,occupationRate:m>0?c/m*100:0,totalMotorcycles:m}}).filter(e=>e.totalRevenue>0).sort((e,t)=>t.totalRevenue-e.totalRevenue)}function m(e,t,a,l){let r=c(e,a,l),n=r.reduce((e,t)=>e+t.totalRevenue,0),u=r.length>0?n/r.length:0,o=r.reduce((e,t)=>e+t.motorcycleCount,0),i={};e.forEach(e=>{if(!e.placa)return;let t=i[e.placa];(!t||e.data_ultima_mov&&t.data_ultima_mov&&new Date(e.data_ultima_mov)>new Date(t.data_ultima_mov))&&(i[e.placa]=e)});let m=Object.values(i).length,d=0;if(t){let e=c(t,a,l).reduce((e,t)=>e+t.totalRevenue,0);e>0&&(d=(n-e)/e*100)}return{totalWeeklyRevenue:n,totalMonthlyRevenue:4.33*n,averageRevenuePerFranchisee:u,totalRentedMotorcycles:o,financialOccupationRate:m>0?o/m*100:0,revenueGrowth:d,averageTicketPerMoto:o>0?n/o:0,receitaLiquidaPorMoto:function(e,t,a){let l=t||new Date().getFullYear(),r=new Date,n=r.getFullYear(),u=r.getMonth()+1;if(a){var o=e,i=l,c=a;let t=_(o,i,c);return t.motorcyclesInMonth>0?t.lucroLiquido/t.motorcyclesInMonth:0}let m=l===n?u:12,d=0,s=0;for(let t=1;t<=m;t++){let a=_(e,l,t);d+=a.lucroLiquido,s+=a.motorcyclesInMonth}return s>0?d/s:0}(e,a,l)}}function d(e,t){let a=[],r=o(e);for(let n=0;n<12;n++){let u=n+1,o=e.filter(e=>{if(!e.data_ultima_mov)return"alugada"===e.status;try{let a=new Date(e.data_ultima_mov),l=a.getFullYear(),r=a.getMonth()+1;if(l===t&&r===u)return!0;if(l<t||l===t&&r<u)return"alugada"===e.status;return!1}catch(e){return!1}}),c={};o.forEach(e=>{if(!e.placa)return;let t=c[e.placa];(!t||e.data_ultima_mov&&t.data_ultima_mov&&new Date(e.data_ultima_mov)>new Date(t.data_ultima_mov))&&(c[e.placa]=e)});let m=Object.values(c).filter(e=>"alugada"===e.status&&e.franqueado&&""!==e.franqueado.trim()),d=m.reduce((e,t)=>e+i(t,r),0),s=m.length,f=s>0?d/s:0;a.push({month:(0,l.GP)(new Date(t,n),"MMM"),revenue:d,motorcycleCount:s,averageTicket:f})}return a}function s(e,t,a){let l=m(e,void 0,t,a).totalWeeklyRevenue,r=4.33*l;return{currentWeekly:l,projectedMonthly:r,projectedQuarterly:3*r,projectedYearly:12*r,optimisticMonthly:1.15*r,pessimisticMonthly:.9*r}}function f(e){let t=Array(12).fill(0).map(()=>({total:0,count:0}));return e.forEach(e=>{if(e.data_ultima_mov&&e.valorSemanal&&"alugada"===e.status)try{let a=(0,r.H)(e.data_ultima_mov);if((0,n.f)(a)){let l=(0,u.t)(a);t[l].total+=e.valorSemanal,t[l].count+=1}}catch(e){}}),t.map((e,t)=>({month:(0,l.GP)(new Date(2024,t),"MMM"),averageRevenue:e.count>0?e.total/e.count:0,count:e.count}))}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;return c(e,a,l).slice(0,t)}function v(e,t,a){let l=c(e,t,a),r=l.filter(e=>e.occupationRate>=91),n=l.filter(e=>e.occupationRate<91),u=l.length>0?l.reduce((e,t)=>e+t.occupationRate,0)/l.length:0;return{totalFranchisees:l.length,franchiseesAboveGoal:r.length,franchiseesBelowGoal:n.length,averageOccupation:u,goalAchievementRate:l.length>0?r.length/l.length*100:0,topPerformers:r.slice(0,3),needsImprovement:n.slice(0,3)}}function g(e,t,a,l){let r=e.filter(e=>{if(!e.data_ultima_mov)return"alugada"===e.status;try{let l=new Date(e.data_ultima_mov),r=l.getFullYear(),n=l.getMonth()+1;if(r===t&&n===a)return!0;if(r<t||r===t&&n<a)return"alugada"===e.status;return!1}catch(e){return!1}}),n=r;return l&&"all"!==l&&(n=r.filter(e=>{var t;return(null==(t=e.franqueado)?void 0:t.trim())===l})),4.33*c(n,t,a).reduce((e,t)=>e+t.weeklyRevenue,0)}function _(e,t,a){let l=e.filter(e=>{if(!e.data_ultima_mov)return"alugada"===e.status;try{let l=new Date(e.data_ultima_mov),r=l.getFullYear(),n=l.getMonth()+1;if(r===t&&n===a)return!0;if(r<t||r===t&&n<a)return"alugada"===e.status;return!1}catch(e){return!1}}),r=4.33*c(l,t,a).reduce((e,t)=>e+t.weeklyRevenue,0),n=l.filter(e=>{if("alugada"!==e.status||!e.data_ultima_mov)return!1;try{let l=new Date(e.data_ultima_mov),r=l.getFullYear(),n=l.getMonth()+1;return r===t&&n===a}catch(e){return!1}}).length,u=l.filter(e=>{if("alugada"!==e.status||!e.data_ultima_mov)return!1;try{let l=new Date(e.data_ultima_mov),r=l.getFullYear(),n=l.getMonth()+1;return r===t&&n===a}catch(e){return!1}}).length,o=r>0,i=new Set(l.map(e=>e.placa)).size,m=700*n+400*u+(o?212*Math.floor(i/10):0),d=r+m,s=.07*d,f=(o?139.9*i:0)+0+(o?250*i:0)+.05*r+0+300*!!o+80*!!o+600*!!o;return{receita:r,receitasNaoOperacionais:m,receitaTotal:d,simplesNacional:s,custosOperacionais:f,lucroLiquido:d-s-f,motorcyclesInMonth:i}}},60679:(e,t,a)=>{a.d(t,{A:()=>l});let l=(0,a(40157).A)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])}}]);